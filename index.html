<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>へー！カウンター</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    text-align: center;
    padding: 50px;
    background: #f0f8ff;
  }
  h1 { color: #333; margin-bottom: 30px; }

  .member {
    margin: 15px 0;
  }
  .member button {
    font-size: 1.2rem;
    padding: 10px 20px;
    border-radius: 15px; 
    background: linear-gradient(135deg, #a0e4b0, #6ec1d6);
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: transform 0.1s ease;
  }
  .member button:active {
    transform: scale(0.95);
  }
  .count {
    font-size: 1.5rem;
    margin-left: 15px;
    color: #444;
  }
</style>
</head>
<body>
<h1>へー！カウンター</h1>

<div id="members"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getFirestore, doc, getDoc, updateDoc, onSnapshot, setDoc } 
    from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

  // Firebase 設定
  const firebaseConfig = {
    apiKey: "AIzaSyAr8etX574HAPKISDxjGNFru_WrFcNthHo",
    authDomain: "hee-counter-1.firebaseapp.com",
    projectId: "hee-counter-1",
    storageBucket: "hee-counter-1.firebasestorage.app",
    messagingSenderId: "487272221928",
    appId: "1:487272221928:web:48f40b93de7acbb8800d5d"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // 部員リスト（好きな名前に置き換えてね）
  const members = ["三浦さん","快平さん","佐々木さん","園田さん","渋谷さん","宮崎さん","堀田さん","秋山さん","堀田さん","工藤さん","隅田さん","李さん"];

  const container = document.getElementById("members");

  members.forEach(name => {
    // HTML生成
    const div = document.createElement("div");
    div.className = "member";
    div.innerHTML = `
      <button>${name}のへー！</button>
      <span class="count" id="count-${name}">0</span>
    `;
    container.appendChild(div);

    const btn = div.querySelector("button");
    const countSpan = div.querySelector(".count");

    const ref = doc(db, "counters", name);

    // 初期化
    const init = async () => {
      const snap = await getDoc(ref);
      if (!snap.exists()) {
        await setDoc(ref, { count: 0 });
      }
    };
    init();

    // ボタンクリック
    btn.addEventListener("click", async () => {
      const snap = await getDoc(ref);
      if (snap.exists()) {
        const current = snap.data().count || 0;
        await updateDoc(ref, { count: current + 1 });
      }
    });

    // リアルタイム反映
    onSnapshot(ref, (docSnap) => {
      if (docSnap.exists()) {
        countSpan.textContent = docSnap.data().count;
      }
    });
  });
</script>
</body>
</html>

